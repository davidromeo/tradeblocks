# Milestone v2.0: Claude Integration

**Status:** ✅ SHIPPED 2026-01-17
**Phases:** 11-16 (including 13.1)
**Total Plans:** 15

## Overview

Enable Claude Code/Cowork to interact with TradeBlocks programmatically via MCP server, providing full API access to data queries, analysis execution, and automated exploration.

## Phases

### Phase 11: Research & Architecture ✓

**Goal**: Investigate MCP vs skill approach, understand TradeBlocks data access patterns, design integration architecture
**Depends on**: v1.0 complete
**Plans**: 2 plans

Plans:
- [x] 11-01: Monorepo Foundation (pnpm workspace + MCP server scaffold) - completed 2026-01-14
- [x] 11-02: MCP Server Scaffold (stdio transport, list_backtests tool) - completed 2026-01-14

**Details:**
- npm workspaces monorepo structure
- MCP server at packages/mcp-server/
- tsup for ESM bundling
- McpServer API (not deprecated Server class)
- Folder-based block structure with .block.json metadata

### Phase 12: Core Integration Layer ✓

**Goal**: Build MCP server tools exposing data queries, statistics, and analysis capabilities
**Depends on**: Phase 11
**Plans**: 3 plans

Plans:
- [x] 12-01: Block Loading and Core Tools (block-loader, output-formatter, 6 Tier 1 tools) - completed 2026-01-14
- [x] 12-02: Analysis Tools (WFA, Monte Carlo, correlation, tail risk, position sizing) - completed 2026-01-14
- [x] 12-03: Performance Tools (chart data, period returns, backtest vs actual, MFE/MAE) - completed 2026-01-14

**Deliverables:**
- 14 MCP tools (6 core + 5 analysis + 3 performance)
- JSON-first output pattern for Claude reasoning
- Full parameter exposure for all calculation modules

### Phase 13: Analysis Capabilities ✓

**Goal**: Add Report Builder integration, custom report generation, automated exploration modes
**Depends on**: Phase 12
**Plans**: 1 plan

Plans:
- [x] 13-01: Report Builder MCP Tools (4 new tools: list_available_fields, run_filtered_query, get_field_statistics, aggregate_by_field) - completed 2026-01-14

**Deliverables:**
- 18 MCP tools total (6 core + 5 analysis + 3 performance + 4 report)
- Full filtering and aggregation capabilities for Claude exploration

### Phase 13.1: Import CSV Tool (INSERTED) ✓

**Goal**: Add `import_csv` MCP tool to accept arbitrary CSV paths and create persistent blocks
**Depends on**: Phase 13
**Plans**: 1 plan

Plans:
- [x] 13.1-01: Implement import_csv MCP tool - completed 2026-01-15

**Deliverables:**
- `import_csv` tool for ad-hoc CSV analysis
- CSV validation and copy-on-import pattern
- 19 MCP tools total

### Phase 14: Multi-Platform Agent Skills ✓

**Goal**: Create skills/tools for Claude Code, OpenAI Agents, and Gemini Agents to interact with TradeBlocks MCP server
**Depends on**: Phase 13.1
**Plans**: 4 plans

Plans:
- [x] 14-01: Core Analysis Skills (health-check, wfa, risk) - completed 2026-01-15
- [x] 14-02: Comparison & Portfolio Skills (compare, portfolio, optimize) - completed 2026-01-15
- [x] 14-03: Documentation & Installation Guide - completed 2026-01-16
- [x] 14-04: npm Packaging Preparation (manifest, bundling, installer module) - completed 2026-01-16

**Deliverables:**
- 6 agent skills with SKILL.md + references/
- Skills documentation (README.md, INSTALL.md, install.sh, install.ps1)
- Desktop Extension manifest (manifest.json for MCPB)
- Skill manifest (index.json) and installer module

### Phase 15: Polish & Documentation ✓

**Goal**: Error handling, usage examples, integration testing, documentation
**Depends on**: Phase 14
**Plans**: 2 plans

Plans:
- [x] 15-01: CLI Command & ISS-006 Fix (install-skills command, flexible CSV discovery) - completed 2026-01-17
- [x] 15-02: Release Pipeline & Docs (GitHub Actions, integration tests, usage docs) - completed 2026-01-17

**Deliverables:**
- CLI commands: install-skills, uninstall-skills, check-skills
- GitHub Actions release workflow (.github/workflows/release.yml)
- 20 MCP server integration tests (Jest)
- Comprehensive usage documentation (USAGE.md, README.md)

### Phase 16: Documentation Review ✓

**Goal**: Comprehensive review and update of all documentation before v2.0 release
**Depends on**: Phase 15
**Plans**: 1 plan

Plans:
- [x] 16-01: Documentation Review (development.md, README.md, MCP docs) - completed 2026-01-17

**Deliverables:**
- Fixed Recharts→Plotly reference in development.md
- Added monorepo structure documentation
- README refocused as developer navigation hub
- MCP tool tables verified and corrected (19 tools)

---

## Milestone Summary

**Decimal Phases:**
- Phase 13.1: Import CSV Tool (inserted after Phase 13 for URGENT ad-hoc CSV capability)

**Key Decisions:**
- Monorepo with npm workspaces (migrated from pnpm)
- MCP server at packages/mcp-server/ with ESM-only config
- McpServer API (not deprecated Server class)
- Folder-based block structure with .block.json metadata
- JSON-first output pattern: JSON for Claude reasoning, text summary for user visibility
- Agent Skills standard (agentskills.io) for cross-platform compatibility
- Progressive disclosure: SKILL.md + references/ for detailed education
- Two distribution paths: Skills (CLI) and Desktop Extension (Claude Desktop)
- Flexible CSV discovery by column header analysis (ISS-006 fix)

**Issues Resolved:**
- ISS-006: Flexible CSV discovery (fixed in 15-01)

**Issues Deferred:**
- ISS-005: Plotly TypeScript type conflicts with pnpm (build-time only, runtime works)

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
