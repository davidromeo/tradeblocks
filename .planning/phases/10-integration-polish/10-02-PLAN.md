---
phase: 10-integration-polish
plan: 02
type: execute
---

<objective>
Test end-to-end WFA flow and ensure all edge cases are handled gracefully.

Purpose: Verify the complete user journey works smoothly and edge cases produce intentional states, not broken UI.
Output: Verified flow from configuration → run → results with all states handled.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-integration-polish/10-01-SUMMARY.md

@app/(platform)/walk-forward/page.tsx
@components/walk-forward/period-selector.tsx
@components/walk-forward/walk-forward-analysis.tsx
@components/walk-forward/walk-forward-summary.tsx

**Features to test (built in Phases 1-9):**
- Configuration card with collapsible sections (Phase 2)
- Input validation (Phase 3)
- Optimization targets (Phase 5)
- Summary view and tab organization (Phase 6)
- Tooltips and terminology (Phase 7)
- Analysis tab with interpretation guidance (Phase 8)
- Calculation formulas (Phase 9)
- Pre-run guidance (Phase 10-01)

**Edge cases to verify:**
- No parameters enabled (Run button disabled - working)
- Zero results after analysis (all combos filtered out)
- Error during analysis (error state in Alert)
- Single-period result
- Many-period result (10+ windows)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add error boundary for WFA components</name>
  <files>components/walk-forward/walk-forward-error-boundary.tsx, app/(platform)/walk-forward/page.tsx</files>
  <action>Create a simple error boundary component for the WFA page:

  1. Create `components/walk-forward/walk-forward-error-boundary.tsx`:
     - React error boundary class component (functional components can't catch errors)
     - Renders Card with error message and "Try Again" button that resets state
     - Passes through children when no error

  2. Wrap the results section (Summary + Tabs) in page.tsx with the error boundary

  This ensures that if any result component throws (e.g., bad data shape), the page doesn't white-screen.

  **AVOID**: Don't wrap the Configuration card - we want config always available even if results fail.</action>
  <verify>Manually verify error boundary catches thrown errors (can temporarily add `throw new Error('test')` in a component)</verify>
  <done>Error boundary exists, wraps results section, shows friendly error state instead of crash</done>
</task>

<task type="auto">
  <name>Task 2: Handle empty results state</name>
  <files>components/walk-forward/walk-forward-summary.tsx, components/walk-forward/walk-forward-analysis.tsx</files>
  <action>Add defensive checks for edge case where results exist but periods array is empty:

  1. In WalkForwardSummary: If `results.periods.length === 0`, show a gentle message: "Analysis completed but no windows met the criteria. Try adjusting window sizes or trade requirements."

  2. In WalkForwardAnalysis: If `results.periods.length === 0`, show similar guidance instead of crashing on undefined access.

  These cases can occur if:
  - All parameter combos filtered out by performance floors
  - All windows skipped due to insufficient trades
  - Data gaps in the block

  **Pattern:** Check at top of component, early return with informative Card.

  **AVOID**: Don't just hide the components - an empty result IS a result and users should understand why.</action>
  <verify>npm run lint passes, components handle empty periods gracefully</verify>
  <done>Empty results show informative message instead of crash or confusing empty state</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>End-to-end WFA flow with error handling and edge case handling</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/walk-forward
    3. Select a block with trades

    Test Configuration Flow:
    4. Verify pre-run guidance appears for aggressive configs (try 14d IS / 14d OOS)
    5. Verify guidance disappears with normal configs (45d IS / 15d OOS)
    6. Verify Run button disabled when no parameters enabled
    7. Enable a parameter and verify Run button enables

    Test Results Flow:
    8. Run a short analysis (small window, few combos)
    9. Verify Summary appears with verdict badges
    10. Click through all 4 tabs (Analysis, Details, Charts, Windows)
    11. Verify Analysis tab shows interpretation guidance
    12. Verify tooltips work on hover

    Test Edge Cases:
    13. If possible, create conditions for zero-window result (very strict filters)
    14. Verify empty state message appears instead of crash
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Error boundary component exists
- [ ] Results section wrapped in error boundary
- [ ] Empty periods handled in Summary and Analysis components
- [ ] End-to-end flow verified by human
- [ ] All tabs and features accessible and working
</verification>

<success_criteria>
- No uncaught errors in normal or edge case flows
- Empty results show informative messages
- Error boundary catches component failures gracefully
- Complete flow verified through human testing
</success_criteria>

<output>
After completion, create `.planning/phases/10-integration-polish/10-02-SUMMARY.md`
</output>
