---
phase: 14-multi-platform-agent-skills
plan: "03"
type: execute
domain: agent-skills
---

<objective>
Create documentation and installation guides for two distribution paths:
1. **Skills** (SKILL.md files) for Claude Code, Codex CLI, Gemini CLI
2. **Desktop Extension** (.mcpb bundle) for Claude Desktop

Purpose: Enable users to install TradeBlocks via their preferred method.
Output: Skills documentation, MCP server manifest.json, and installation guides for both paths.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-multi-platform-agent-skills/14-01-SUMMARY.md
@.planning/phases/14-multi-platform-agent-skills/14-02-SUMMARY.md

**Prior work:**
- 14-01: Created health-check, wfa, risk skills
- 14-02: Created compare, portfolio, optimize skills

**Skills created (6 total):**
- tradeblocks-health-check
- tradeblocks-wfa
- tradeblocks-risk
- tradeblocks-compare
- tradeblocks-portfolio
- tradeblocks-optimize

**Two Distribution Paths (from research):**

| What | Format | Target | Installation |
|------|--------|--------|--------------|
| Skills | SKILL.md folders | Claude Code, Codex CLI, Gemini CLI | symlink or copy to ~/.{platform}/skills/ |
| MCP Server | .mcpb bundle | Claude Desktop | double-click .mcpb file |

**Official Documentation Sources:**
- Skills: https://github.com/anthropics/skills
- Desktop Extensions: https://github.com/anthropics/mcpb
- MCPB CLI: npm install -g @anthropic-ai/mcpb
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Skills package README and installation guide</name>
  <files>packages/agent-skills/README.md, packages/agent-skills/INSTALL.md</files>
  <action>
Create documentation for the agent-skills package (CLI installations):

**README.md structure:**

1. **Header**: "TradeBlocks Agent Skills"
   - Brief description: Conversational workflows for trading analysis
   - Badges: Claude Code, Codex CLI, Gemini CLI compatible

2. **What Are Skills?**
   - Skills are markdown files that teach agents how to perform specific tasks
   - They guide conversation, not execute code directly
   - Require the TradeBlocks MCP server for actual data/analysis

3. **Available Skills** (table):
   | Skill | Purpose | Key MCP Tools Used |
   |-------|---------|-------------------|
   | tradeblocks-health-check | Strategy health evaluation | get_statistics, run_monte_carlo, get_tail_risk |
   | tradeblocks-wfa | Walk-forward analysis | run_walk_forward |
   | tradeblocks-risk | Risk assessment & position sizing | calculate_position_sizing, get_tail_risk |
   | tradeblocks-compare | Performance comparison | compare_backtest_vs_actual, calculate_correlation |
   | tradeblocks-portfolio | Portfolio addition decisions | calculate_correlation, get_statistics |
   | tradeblocks-optimize | Parameter optimization | list_available_fields, aggregate_by_field |

4. **Prerequisites**:
   - TradeBlocks MCP server must be configured and running
   - At least one block directory with trade data
   - See [MCP Server Setup](../mcp-server/README.md)

5. **Quick Start (Claude Code)**:
   ```bash
   # Personal installation (available in all projects)
   ln -s /path/to/tradeblocks/packages/agent-skills/tradeblocks-* ~/.claude/skills/

   # Or project installation (shared via git)
   ln -s /path/to/tradeblocks/packages/agent-skills/tradeblocks-* .claude/skills/
   ```

   Then invoke: `/tradeblocks-health-check`

6. **Usage Pattern**:
   - Skills are conversational - they ask clarifying questions
   - First step always verifies MCP server connection
   - Follow the guided workflow prompts

7. **See Also**:
   - [Detailed Installation Guide](INSTALL.md) for all platforms
   - [MCP Server for Claude Desktop](../mcp-server/README.md)

**INSTALL.md structure:**

1. **Prerequisites**
   - Node.js 18+
   - TradeBlocks MCP server built and configured

2. **Claude Code Installation**
   - Option A: Personal (~/.claude/skills/) - available everywhere
   - Option B: Project (.claude/skills/) - shared with team
   - Verification: Ask Claude "What skills are available?"
   - Debug: `claude --debug` to see skill loading

3. **Codex CLI Installation**
   - Symlink to ~/.codex/skills/
   - Note: Codex may use different activation syntax

4. **Gemini CLI Installation**
   - Symlink to ~/.gemini/skills/
   - Note: Gemini may use different activation syntax

5. **Troubleshooting**
   - "Skill not found": Check SKILL.md exists and has valid YAML frontmatter
   - "Tool not found": Ensure MCP server is running
   - YAML errors: No tabs, frontmatter must start on line 1

6. **Updating Skills**
   - If using symlinks: `git pull` updates automatically
   - If copied: Re-copy after updates
  </action>
  <verify>README.md has skills table and quick start; INSTALL.md has all three platforms</verify>
  <done>Skills documentation complete with README.md and INSTALL.md</done>
</task>

<task type="auto">
  <name>Task 2: Create MCP server Desktop Extension manifest</name>
  <files>packages/mcp-server/manifest.json, packages/mcp-server/README.md (update)</files>
  <action>
Create manifest.json for Desktop Extension packaging:

**manifest.json** (following https://github.com/anthropics/mcpb spec):

```json
{
  "mcpb_version": "0.1.0",
  "name": "tradeblocks",
  "version": "0.1.0",
  "description": "Options trading analysis - backtest stats, walk-forward analysis, Monte Carlo, risk metrics",
  "author": "David Romeo",
  "homepage": "https://github.com/davidromeo/tradeblocks",
  "repository": "https://github.com/davidromeo/tradeblocks",
  "license": "MIT",
  "server": {
    "type": "node",
    "entry": "dist/index.js"
  },
  "user_config": {
    "blocks_directory": {
      "type": "path",
      "description": "Directory containing your trading data blocks",
      "required": true
    }
  },
  "tools": [
    { "name": "list_backtests", "description": "List available trading backtests" },
    { "name": "get_statistics", "description": "Get performance statistics for a backtest" },
    { "name": "run_walk_forward", "description": "Run walk-forward analysis" },
    { "name": "run_monte_carlo", "description": "Monte Carlo simulation" },
    { "name": "calculate_correlation", "description": "Calculate strategy correlations" },
    { "name": "get_tail_risk", "description": "Analyze tail risk metrics" },
    { "name": "calculate_position_sizing", "description": "Kelly criterion position sizing" },
    { "name": "get_performance_charts", "description": "Get chart data for visualization" },
    { "name": "get_period_returns", "description": "Returns by time period" },
    { "name": "compare_backtest_vs_actual", "description": "Compare backtest to live results" },
    { "name": "list_available_fields", "description": "List filterable trade fields" },
    { "name": "run_filtered_query", "description": "Query trades with filters" },
    { "name": "get_field_statistics", "description": "Statistics for a trade field" },
    { "name": "aggregate_by_field", "description": "Aggregate trades by field values" },
    { "name": "import_csv", "description": "Import CSV file as new block" }
  ]
}
```

**Update packages/mcp-server/README.md** to add Desktop Extension section:

Add new section "Claude Desktop Installation":

```markdown
## Claude Desktop Installation

### Option 1: Desktop Extension (Recommended)

Download the latest `.mcpb` file from releases and double-click to install.

Or build from source:
```bash
npm install -g @anthropic-ai/mcpb
cd packages/mcp-server
npm run build
mcpb pack
# Creates tradeblocks.mcpb - double-click to install
```

### Option 2: Manual Configuration

Add to Claude Desktop settings (`~/Library/Application Support/Claude/claude_desktop_config.json`):

```json
{
  "mcpServers": {
    "tradeblocks": {
      "command": "node",
      "args": ["/path/to/tradeblocks/packages/mcp-server/dist/index.js"],
      "env": {
        "TRADEBLOCKS_BLOCKS_DIR": "/path/to/your/blocks"
      }
    }
  }
}
```
```

Add npm scripts to package.json:
- "pack": "mcpb pack" (create .mcpb bundle)
  </action>
  <verify>manifest.json exists with valid structure; README.md has Desktop Extension section</verify>
  <done>MCP server manifest.json created and README.md updated with Claude Desktop instructions</done>
</task>

<task type="auto">
  <name>Task 3: Create installation helper script</name>
  <files>packages/agent-skills/install.sh</files>
  <action>
Create bash script for easy skill installation:

**install.sh**:
```bash
#!/usr/bin/env bash
# Install TradeBlocks skills for Claude Code, Codex CLI, or Gemini CLI

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SKILLS=(tradeblocks-health-check tradeblocks-wfa tradeblocks-risk tradeblocks-compare tradeblocks-portfolio tradeblocks-optimize)

usage() {
  echo "Usage: $0 <platform>"
  echo ""
  echo "Platforms:"
  echo "  claude    Install to ~/.claude/skills/"
  echo "  codex     Install to ~/.codex/skills/"
  echo "  gemini    Install to ~/.gemini/skills/"
  echo "  all       Install to all platforms"
  echo ""
  echo "Example:"
  echo "  $0 claude"
  exit 1
}

install_skills() {
  local platform=$1
  local target_dir="$HOME/.${platform}/skills"

  echo "Installing skills to $target_dir..."
  mkdir -p "$target_dir"

  for skill in "${SKILLS[@]}"; do
    local source="$SCRIPT_DIR/$skill"
    local target="$target_dir/$skill"

    if [ -L "$target" ]; then
      echo "  Updating: $skill"
      rm "$target"
    elif [ -d "$target" ]; then
      echo "  Skipping: $skill (directory exists, remove manually to update)"
      continue
    else
      echo "  Installing: $skill"
    fi

    ln -s "$source" "$target"
  done

  echo ""
  echo "Done! Verify with: ls -la $target_dir"
}

case "${1:-}" in
  claude|codex|gemini)
    install_skills "$1"
    ;;
  all)
    install_skills "claude"
    install_skills "codex"
    install_skills "gemini"
    ;;
  *)
    usage
    ;;
esac
```

Make executable: chmod +x install.sh
  </action>
  <verify>install.sh is executable and handles all platforms</verify>
  <done>install.sh created and executable</done>
</task>

<task type="auto">
  <name>Task 4: Final verification and commit</name>
  <files>packages/agent-skills/, packages/mcp-server/, .planning/STATE.md</files>
  <action>
Final verification:

1. Verify all 6 skills exist with correct structure:
   ```bash
   ls packages/agent-skills/tradeblocks-*/SKILL.md
   ```
   Each should have valid YAML frontmatter (name, description)

2. Verify skill references exist:
   ```bash
   ls packages/agent-skills/tradeblocks-*/references/
   ```

3. Verify skills documentation:
   - packages/agent-skills/README.md
   - packages/agent-skills/INSTALL.md
   - packages/agent-skills/install.sh (executable)

4. Verify MCP server Desktop Extension:
   - packages/mcp-server/manifest.json
   - packages/mcp-server/README.md has Claude Desktop section

5. Test manifest.json is valid JSON:
   ```bash
   node -e "require('./packages/mcp-server/manifest.json')"
   ```

6. Git commit all documentation:
   ```bash
   git add packages/agent-skills/ packages/mcp-server/manifest.json packages/mcp-server/README.md
   git commit -m "docs(14-03): add skills and desktop extension documentation"
   ```

7. Update .planning/STATE.md:
   - Change status to "Phase 14 complete"
   - Add decisions about two distribution paths
  </action>
  <verify>All files exist and git commit succeeds</verify>
  <done>All documentation verified and committed, STATE.md updated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] packages/agent-skills/README.md exists with skills table
- [ ] packages/agent-skills/INSTALL.md covers Claude Code, Codex, Gemini
- [ ] packages/agent-skills/install.sh is executable
- [ ] packages/mcp-server/manifest.json exists with valid MCPB structure
- [ ] packages/mcp-server/README.md has Claude Desktop installation section
- [ ] All 6 skill directories have SKILL.md + references/
- [ ] .planning/STATE.md updated to reflect Phase 14 complete
</verification>

<success_criteria>
- Skills documentation complete for CLI agent users
- Desktop Extension manifest ready for .mcpb packaging
- Both distribution paths clearly documented
- Installation script works for all CLI platforms
- Phase 14 fully complete
</success_criteria>

<output>
After completion, create `.planning/phases/14-multi-platform-agent-skills/14-03-SUMMARY.md`:

# Phase 14-03: Documentation & Installation Summary

**Two distribution paths documented: Skills for CLI agents, Desktop Extension for Claude Desktop**

## Accomplishments
- Created skills README.md and INSTALL.md for CLI installations
- Created manifest.json for Desktop Extension (.mcpb) packaging
- Updated MCP server README with Claude Desktop instructions
- Created install.sh helper script for all platforms

## Files Created
- packages/agent-skills/README.md
- packages/agent-skills/INSTALL.md
- packages/agent-skills/install.sh
- packages/mcp-server/manifest.json

## Files Modified
- packages/mcp-server/README.md (added Claude Desktop section)
- .planning/STATE.md (phase complete)

## Key Decisions
- Two distribution paths: Skills (CLI) and Desktop Extension (Claude Desktop)
- Skills use symlinks for easy updates
- Desktop Extension uses MCPB format for one-click installation
- Node.js server type (ships with Claude Desktop)

## Phase 14 Complete
All 6 agent skills created with documentation. Both distribution methods documented.
Ready for Phase 15: Polish & Documentation.
</output>
