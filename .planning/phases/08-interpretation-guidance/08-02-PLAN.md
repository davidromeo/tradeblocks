---
phase: 08-interpretation-guidance
plan: 02
type: execute
---

<objective>
Create the full WalkForwardAnalysis component with verdict explanation, red flags, and insights sections.

Purpose: Build the complete Analysis tab content that helps users understand what their WFA results mean. This is the core deliverable of Phase 8 - making interpretation accessible to newcomers.

Output: Fully functional Analysis tab with plain-language explanations, contextual red flags, and non-prescriptive insights.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-interpretation-guidance/08-RESEARCH.md
@.planning/phases/08-interpretation-guidance/08-CONTEXT.md
@.planning/phases/08-interpretation-guidance/08-01-SUMMARY.md

**Key source files:**
@lib/calculations/walk-forward-interpretation.ts (created in Plan 01)
@lib/calculations/walk-forward-verdict.ts
@app/(platform)/walk-forward/page.tsx
@components/walk-forward/walk-forward-summary.tsx

**Tech stack available:** React, shadcn/ui (Card, HoverCard, Badge), Tailwind CSS
**Established patterns:**
- Assessment color coding (emerald=good, amber=moderate, rose=concerning)
- HoverCard for detailed explanations
- Card-based sections

**Constraining decisions from CONTEXT.md:**
- Plain-language explanations (no WFA jargon)
- Insights not recommendations ("suggests" not "you should")
- Three sections: Why the verdict, Red flags, What this suggests
- Target audience: Primarily newcomers who need hand-holding
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WalkForwardAnalysis component</name>
  <files>components/walk-forward/walk-forward-analysis.tsx</files>
  <action>
Create the Analysis tab component following the UI pattern from RESEARCH.md:

```
Structure:
┌─────────────────────────────────────────────────────┐
│ ## The Verdict: [Pass/Marginal/Fail]               │
│                                                     │
│ [Plain language explanation of what this means]     │
│                                                     │
│ ### Why This Verdict                               │
│ • Efficiency: 75% — [explanation]                  │
│ • Stability: 82% — [explanation]                   │
│ • Consistency: 80% — [explanation]                 │
│                                                     │
│ ### Things to Note (only if red flags exist)       │
│ • [Specific observation with context]              │
│                                                     │
│ ### What This Suggests                             │
│ [2-3 sentences about what results indicate]         │
└─────────────────────────────────────────────────────┘
```

Implementation:

1. Props interface: `WalkForwardAnalysisProps { results: WalkForwardResults }`

2. Use useMemo to compute interpretation data:
   - assessment from assessResults()
   - verdictExplanation from generateVerdictExplanation()
   - redFlags from detectRedFlags()
   - insights from generateInsights()

3. Main verdict section (top):
   - Large icon matching assessment (CheckCircle2/AlertTriangle/XCircle)
   - Headline text: "Looking Good" / "Mixed Results" / "Needs Attention" with assessment color
   - Plain-language explanation paragraph from verdictExplanation.headline

4. "Why This Verdict" section:
   - Map over verdictExplanation.factors
   - Each factor shows: metric name, value, colored badge (Good/Mixed/Low), explanation text
   - Use existing assessment color classes from walk-forward-summary.tsx pattern

5. "Things to Note" section (ONLY if redFlags.length > 0):
   - Header with AlertTriangle icon
   - List each red flag with severity-based styling:
     - 'concern' = rose background/text
     - 'warning' = amber background/text
   - Title in bold, description below

6. "What This Suggests" section:
   - Header with Lightbulb icon
   - Map over insights as bullet points
   - Use muted styling to indicate these are observations, not prescriptions

Style notes:
- Use Card component for overall container
- Space sections with border-t dividers
- Follow existing color patterns from walk-forward-summary.tsx
- Keep text sizes readable: sm for body, xs for supporting text
  </action>
  <verify>npm run typecheck passes with no errors in new component</verify>
  <done>WalkForwardAnalysis component exists with all 4 sections (verdict, factors, red flags conditional, insights)</done>
</task>

<task type="auto">
  <name>Task 2: Integrate Analysis component into page</name>
  <files>app/(platform)/walk-forward/page.tsx</files>
  <action>
Replace the placeholder Analysis tab content with the real WalkForwardAnalysis component:

1. Import WalkForwardAnalysis from '@/components/walk-forward/walk-forward-analysis'

2. Replace the placeholder Card in TabsContent value="analysis" with:
   `<WalkForwardAnalysis results={results.results} />`

3. Move "Analysis" tab to be the DEFAULT tab (change defaultValue from "details" to "analysis"):
   - Newcomers should see interpretation first
   - Experienced users can switch to Detailed Metrics

4. Reorder TabsTrigger elements so Analysis appears first visually (leftmost)

5. Remove the useMemo calls for interpretation data from page.tsx since they're now inside the component
  </action>
  <verify>npm run typecheck passes; npm run build succeeds</verify>
  <done>Analysis tab shows full interpretation content; Analysis is default tab; tabs reordered with Analysis first</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Analysis tab with verdict explanation, red flags detection, and insights for WFA results interpretation</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Navigate to Walk-Forward Analysis page
    3. Select a block with data and run an analysis (or select existing run from history)
    4. Verify Analysis tab is the default (shown first)
    5. Check verdict section shows appropriate headline and explanation
    6. Check "Why This Verdict" shows all 3 factors with values and explanations
    7. Check "Things to Note" only appears if there are actual red flags (try different runs)
    8. Check "What This Suggests" shows 2-3 insight sentences
    9. Verify language is plain (no jargon) and observational (no "you should")
    10. Switch to other tabs to confirm they still work
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run typecheck` passes
- [ ] `npm run build` succeeds
- [ ] Analysis tab displays full interpretation content
- [ ] Analysis is default tab (shown on results load)
- [ ] Red flags section hidden when no issues detected
- [ ] Language is plain and non-prescriptive
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Human verification approved
- No TypeScript errors
- Analysis tab provides clear interpretation guidance for newcomers
- Phase 8 complete
</success_criteria>

<output>
After completion, create `.planning/phases/08-interpretation-guidance/08-02-SUMMARY.md`

Include in summary:
- Key interpretation patterns implemented
- Red flag detection logic
- Any deviations from research recommendations
</output>
