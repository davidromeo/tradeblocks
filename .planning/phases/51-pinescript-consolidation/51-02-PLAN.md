---
phase: 51-pinescript-consolidation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/spx-highlow-timing.pine
  - scripts/spx-30min-checkpoints.pine
  - scripts/spx-hourly-checkpoints.pine
  - scripts/README.md
autonomous: true

must_haves:
  truths:
    - "spx-highlow-timing.pine is deleted from the repository"
    - "spx-30min-checkpoints.pine is deleted from the repository"
    - "spx-hourly-checkpoints.pine is deleted from the repository"
    - "scripts/README.md documents a 3-script workflow (spx-daily, spx-15min-checkpoints, vix-intraday)"
    - "README no longer references 30-min, hourly, or standalone highlow scripts"
    - "README documents the new highlow timing and enriched VIX fields in the daily data section"
  artifacts:
    - path: "scripts/README.md"
      provides: "Updated documentation for 3-script workflow"
      contains: "request.security_lower_tf"
  key_links: []
---

<objective>
Delete obsolete scripts and update the README for the consolidated 3-script workflow.

Purpose: Remove scripts that are now either merged into the daily script (highlow) or have no downstream consumers (30-min, hourly checkpoints), and update documentation to reflect the new simpler workflow.

Output: 3 scripts deleted, README rewritten for 3-script architecture.
</objective>

<execution_context>
@/Users/davidromeo/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davidromeo/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/51-pinescript-consolidation/51-RESEARCH.md
@scripts/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete obsolete PineScript files</name>
  <files>scripts/spx-highlow-timing.pine, scripts/spx-30min-checkpoints.pine, scripts/spx-hourly-checkpoints.pine</files>
  <action>
Delete these 3 files using `git rm`:

1. `scripts/spx-highlow-timing.pine` -- Highlow timing functionality is now merged into spx-daily.pine via request.security_lower_tf()
2. `scripts/spx-30min-checkpoints.pine` -- No downstream consumer (no DuckDB table, no MCP tool, no UI). The 15-min script covers all checkpoint use cases.
3. `scripts/spx-hourly-checkpoints.pine` -- Same as 30-min: no downstream consumer.

Use `git rm` (not plain `rm`) so the deletions are staged for commit.
  </action>
  <verify>
1. `ls scripts/spx-highlow-timing.pine` returns "No such file or directory"
2. `ls scripts/spx-30min-checkpoints.pine` returns "No such file or directory"
3. `ls scripts/spx-hourly-checkpoints.pine` returns "No such file or directory"
4. `git status` shows the 3 files as deleted
  </verify>
  <done>
All 3 obsolete PineScript files are deleted and staged for commit.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rewrite scripts/README.md for 3-script workflow</name>
  <files>scripts/README.md</files>
  <action>
Rewrite `scripts/README.md` to reflect the consolidated 3-script workflow. Key changes:

**Script Overview section:**
- Remove 30-min and hourly checkpoint entries
- Remove standalone highlow timing entry
- Keep: spx-daily.pine (now with highlow + enriched VIX), spx-15min-checkpoints.pine, vix-intraday.pine
- Update the daily script description to mention highlow timing (via request.security_lower_tf) and enriched VIX fields

**Output Filenames section:**
- Remove spx_30min.csv, spx_hourly.csv, spx_highlow.csv entries
- Keep: spx_daily.csv, spx_15min.csv, vix_intraday.csv

**Data Fields section:**
- Remove "30-Minute Checkpoints" subsection entirely
- Remove "Hourly Checkpoints" subsection entirely
- Remove "High/Low Timing" subsection (it's now part of daily data)
- Add highlow timing fields to the "Daily Market Data" subsection (High_Time, Low_Time, High_Before_Low, High_In_First_Hour, Low_In_First_Hour, High_In_Last_Hour, Low_In_Last_Hour, Reversal_Type, High_Low_Spread, Early_Extreme, Late_Extreme, Intraday_High, Intraday_Low)
- Add enriched VIX fields to the "Daily Market Data" subsection (VIX_Gap_Pct, VIX9D_Open, VIX9D_Change_Pct, VIX_High, VIX_Low, VIX3M_Open, VIX3M_Change_Pct)
- Add a note about highlow data availability: "Note: Highlow timing fields use intrabar data and are available for the most recent ~5 years. Older dates will have na values for these fields."

**Quick Start section:**
- Update step 2 to say "Set timeframe: Daily for spx-daily, 5-min for others"
- Keep the rest as-is

**Tips section:**
- Remove reference to combining data from multiple files for highlow
- Keep remaining tips

**Intraday Checkpoints section:**
- Only list 15-min checkpoints (remove 30-min and hourly rows)
- Update section title from "Intraday Price Checkpoints" to just reference the 15-min script

Preserve the overall document structure and tone. Do NOT add emojis.
  </action>
  <verify>
1. README does NOT contain the strings "30min", "hourly", "spx-highlow", "spx_30min", "spx_hourly", "spx_highlow"
2. README contains "High_Time" and "VIX_Gap_Pct" in the daily data section
3. README lists exactly 3 scripts in the overview
4. README lists exactly 3 output filenames
  </verify>
  <done>
README.md documents the 3-script workflow with complete field listings for all exported data including the new highlow and VIX fields. No references to deleted scripts remain.
  </done>
</task>

</tasks>

<verification>
1. `ls scripts/*.pine | wc -l` returns 4 (spx-daily, spx-15min-checkpoints, vix-intraday, poc-highlow-daily-ltf)
2. `grep -c "30min\|hourly\|spx-highlow" scripts/README.md` returns 0
3. `grep "High_Time" scripts/README.md` returns a match
4. `grep "VIX_Gap_Pct" scripts/README.md` returns a match
</verification>

<success_criteria>
- 3 obsolete scripts deleted from the repository
- README accurately describes the 3-script workflow
- All 13 highlow fields and 7 enriched VIX fields documented
- No references to deleted scripts in README
</success_criteria>

<output>
After completion, create `.planning/phases/51-pinescript-consolidation/51-02-SUMMARY.md`
</output>
